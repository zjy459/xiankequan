<!-- è¯„è®ºæ¿å— -->
<view class="post-list">
  <block wx:for="{{posts}}" wx:key="_id">
    <view class="post-item">
      <view class="nickname">
        {{(usersMap[item.userId] && usersMap[item.userId].nickname) || 'åŒ¿åç”¨æˆ·'}}
      </view>
      <view class="content">
        <text class="item-title">{{item.title}}</text>
      </view>
      <view class="post-footer">
        <view class="time">{{item.createTime}}</view>
        <view class="actions">
          <button class="action-btn" size="mini" bindtap="onLike" data-id="{{item._id}}">
            â¤ {{item.likeCount}}
          </button>
          <button class="action-btn" size="mini" bindtap="onComment" data-id="{{item._id}}">
            ğŸ’¬ {{item.commentCount}}
          </button>
        </view>
      </view>
      <!-- è¯„è®ºå±•ç¤º -->
      <view wx:if="{{item.commentCount > 0}}" class="comment-panel">
        <block wx:for="{{commentsMap[item._id]}}" wx:for-item="comment" wx:for-index="commentIdx" wx:key="_id">
          <view wx:if="{{commentIdx < 2}}" class="comment-row">
            <text class="comment-author">
              {{(usersMap[comment.userId] && usersMap[comment.userId].nickname) || 'åŒ¿åç”¨æˆ·'}}
            </text>
            <text class="comment-content">{{comment.content}}</text>
          </view>
        </block>
        <view wx:if="{{commentsMap[item._id].length > 2}}" class="comment-count-row" bindtap="onComment" data-id="{{item._id}}">
          å…±{{commentsMap[item._id].length}}æ¡è¯„è®º >
        </view>
      </view>
    </view>
  </block>
</view>